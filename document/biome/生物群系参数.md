## 生态群系参数

### 生态群系参数

---

1. 在生成世界的时候，主要有五个主要参数控制生物群系的生成，分别是：温度、湿度、大陆性、侵蚀度、怪异度
2. 大陆性、侵蚀度、怪异度，三个参数不但控制生物群系生成，而且控制地形的生成，例如大陆性越高，距离海洋越远；侵蚀性越高，地形越平坦；怪异度越高，地形就越奇特。
3. 在F3的调试屏幕中，T表示温度，V表示湿度，C表示大陆性，E表示侵蚀度，W表示怪异性
4. 生物群系会生成在相应参数的位置，比如温度高的地方会生成沙漠，温度低的地方就是雪山或者雪松林等
### 生物群系列表

---

- 在噪音生成设置里面，有一个列表，表示了要生成哪些生物群系，以及要如何生成一个生物群系。
- 例如：生成蘑菇岛群系
```java
public class CustomBiome {
    public static void createMushroomFields() {
        List<MultiNoiseUtil.NoiseHypercube> mushroomFields = new ParameterUtils.ParameterPointListBuilder()
                .temperature(ParameterRange.of(-1f, 1f))
                .humidity(ParameterRange.of(-1f, 1f))
                .continentalness(ParameterRange.of(-1.2f, -1.05f))
                .erosion(ParameterRange.of(-1f, 1f))
                .weirdness(ParameterRange.of(-1f, 1f))
                .depth(ParameterRange.of(0f))
                .offset(0f)
                .build();
    }
}
```
### 自定义生态群系

---

- 生物群系存储在数据包的data/<模组ID>/worldgen/biome路径中的JSON文件中
- 例如：
```java
public class CustomBiome {
    public static void biome() {
        BiomeEffects.Builder builder = new BiomeEffects.Builder();
        // 天空颜色、雾气颜色、水体颜色、水雾颜色
        builder.skyColor(0x79A6FF)
                .fogColor(0xC0D8FF)
                .waterColor(0x3F76E4)
                .waterFogColor(0x050533);
        return new Biome.Builder()
                // 是否可以降水
                .precipitation(true)
                // 湿度
                .downfall(0.5f)
                // 温度
                .temperature(0.7f)
                // 构造生成地物
                .generationSettings(generationSettings.build())
                // 生成生物实体Entity
                .spawnSettings(spawnSettings.build())
                // 群系效果
                .effects(builder.build())
                .build();
    }
}
```
- Has Precipitation：决定该生物群系是否拥有降水
- Temperature：用于草和树叶等地物的颜色，以及计算随高度调整的温度值
- Downfall：控制草和树叶的颜色，大于0.85的值还可以使火焰更快地燃烧。
- BiomeEffects：生物群系效果用于控制生物群系中的颜色、声音、粒子效果等视觉听觉效果部分
    * Foliage Color：用于树叶和藤蔓的颜色渲染。若不写，颜色将由downfall和temperature决定
      + 函数方法：``foliageColor(int foliageColor)``
    * Grass Color：用于草方块、草、蕨等的颜色渲染，若不写，颜色将由downfall和temperature决定
      + 函数方法：``grassColor(int grassColor)``
    * Grass Color Modifier：对生物群系的颜色进一步修斯，所以提供了两种修饰方式，即沼泽（Swamp）和黑森林（Dark Forest）（默认为None）
      + 函数方法：``grassColorModifier(BiomeEffects.GrassColorModifier grassColorModifier)``
      + 其中：草、草方块、甘泽等，使用#4c763c颜色，否则使用#6a7039颜色，树木则使用#6a7039颜色，红树林沼泽中的#8db127颜色，均不受颜色图的影响
      + 而黑森林中的花草中的颜色是以#fefefe进行按位与运算，然后以#28340a取平均后的结果
    * Sky Color：用于天空的十六进制转十进制RGB颜色值。天空的颜色
      + 函数方法：``skyColor(int skyColor)``
    * Fog Color：用于迷雾的十六进制转十进制RGB颜色值。雾气的颜色
      + 函数方法：``fogColor(int fogColor)``
    * Water Color：用于水的十六进制转十进制RGB颜色值。水体的颜色
      + 函数方法：``waterColor(int waterColor)``
    * Water Fog Color：用于水下迷雾的十六进制转十进制RGB颜色值。水雾的颜色
      + 函数方法：``waterFogColor(int waterFogColor)``
    * Particle：充斥在生物群系中的粒子
      + 函数方法：``particleConfig(BiomeParticleConfig particleConfig)``
    * Carvers：要使用的地形雕刻器。填写已配置雕刻器ID
      + 函数方法：``DefaultBiomeFeatures.addDungeons(builder);`` 生成地牢
    * Features：由11个元素组成的列表。每个元素可以是已放置地物ID。列举出的地物按步骤按顺序依次应用于每个区块。
      + 前提条件：``GenerationSettings.LookupBackedBuilder generationSettings = new GenerationSettings.LookupBackedBuilder();``
      + ``context.getRegistryLookup(RegistryKeys.PLACED_FEATURE);`` 生成放置地物（Placed Feature）
      + ``context.getRegistryLookup(RegistryKeys.CONFIGURED_CARVER);`` 生成配置地物（Configured Feature）
      + 使用方法：``DefaultBiomeFeatures.addMossyRocks(generationSettings);`` 生成苔石地物
    * Creature Spawn Probability：值越大，世界生成时生成的动物（creature）数量越多
    * Spawners：生物生成设置
      + 前提条件：``SpawnSettings.Builder spawnSettings = new SpawnSettings.Builder();``
      + 使用方法：``spawnSettings.spawn(SpawnGroup.CREATURE, new SpawnSettings.SpawnEntry(EntityType.PIG, 2, 3, 5));``
      + 生成猪实体，且权重为2，数量为最小群体3，最大群体为5
    * Spawn Cost：生成势。以一套类似于模拟真空中的点电荷系统的机制控制该生物群系内生成生物的数量与密度
    * Ambient Sound：用于环境音效的声音事件
      + 函数方法：``loopSound(RegistryEntry\<SoundEvent> loopSound)``
    * Mood Sound：氛围音效所使用的设置
      + 函数方法：``moodSound(BiomeMoodSound moodSound)``
    * Additions Sound：附加音效所使用的设置
      + 函数方法：``additionsSound(BiomeAdditionsSound additionsSound)``

### 参考：[定义生物群系](https://www.bilibili.com/read/cv35005096)和[生物群系数据格式](https://zh.minecraft.wiki/w/生物群系数据格式)