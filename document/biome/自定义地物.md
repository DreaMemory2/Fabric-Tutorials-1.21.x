## 地物

### 地物概念

---

- 地物类型决定了一个地物包含了哪些东西，比如如果它的类型为树，就会拥有树干和树叶，如果是花，就有各种类型的花朵
- 定义地物类型文件储存在data/<模组ID>/worldgen/configured_feature文件夹下

```json
{
  "type": "地物类型ID",
  "config": "此已配置的地物的配置"
}
```
- 其中：Config的内容根据Type中的内容决定。而type的类型相当多样，其中常见有
    * **Tree**：树木
    * **Fossil**：自定义结构
    * **Netherrack Replace Blobs**中的Replace Single Block：替换方块
    * **Random Boolean Selector**：随机从两个地物中选择一个
    * **Simple Random Selector**：随机从列表中选择一个地物且概率均等
    * **Random Selector**：按照设置的权重随机从列表中选择一个地物
### 地物放置

---

- 放置修饰器（**Placement Modifier**）决定了一个地物类型在世界中应该如何被生成，而放置修饰器则是在已放置的地物（**Placed Feature**）文件中配置
- 它存放在data/<模组ID>/worldgen/placed_feature文件夹下
```json
{
  "feature": "一个已配置的地物的ID",
  "placement": {
    "": "一个放置修斯器的列表列表中的修饰器会被按顺序依次调用",
    "type": "放置修饰器的类型"
  }
}
```
- 在放置地物的过程中，首先要获取放置地物的**初始坐标**。如果是直接放置的地物，则初始坐标是一个区块的西北角，即一个区块中xz坐标较小的位置；如果是地物A被地物B所放置，则初始坐标就是调用地物B，且经过**放置修饰器**修饰后的坐标
- 接着将**初始坐标**传入到**放置修饰器列表**，然后让第一个**放置修饰器**进行处理（如果没有放置修饰器就直接返回原坐标），接着继续将**放置修饰器**处理后的结果传给下一个**放置修饰器**，直到列表完成
- 如果**放置修饰器**传回”空“的坐标（阻止此地物生成），则放置修饰器将不会被进行，就直接放弃此次生成
- 例子
```json
{
  "feature": "minecraft:oak",
  "placement": [
    {
      "type": "minecraft:biome"
    },
    {
      "type": "minecraft:count",
      "count": 4
    },
    {
      "type": "minecraft:in_square"
    },
    {
      "type": "minecraft:rarity_filter",
      "chance": 4
    }
  ]
}
```
- 放置修饰器的作用
  * **Biome**：用于限制地物只能被放置在这个生物群系
  * **Count**：当count的值为四时，则返回四个和输入坐标一样的坐标，而这四个返回的坐标每一个都会分别执行一次后续的放置修饰器
  * **In Square**：它将会让输入的坐标在xz轴上随机增加一个值从而实现地物的随机分布
  * **Rarity Filter**：它会以1/chance的概率通过输入的坐标，因此四个输入的坐标，平均而言只会有一个坐标能成功通过，并放置地物